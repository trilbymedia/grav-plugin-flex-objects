{% extends 'partials/base.html.twig' %}
{% use 'flex-directory/pages/titlebar/types.html.twig' %}

{% set flex = grav.flex_directory %}
{% set directory_url =  base_url_relative ~ '/' ~ location %}

{% block head %}
    {% if flex.count == 1 %}
        {{ redirect_me(base_url ~ '/flex-directory/' ~ flex.directory.type) }}
    {% endif %}
    {{ parent() }}
{% endblock %}

{% block content %}

    <h1>{{ 'PLUGIN_FLEX_DIRECTORY.TYPES_TITLE'|tu }}</h1>

    <div id="types" class="card-row grid fixed-blocks pure-g">
        {% for type,directory in flex.directories %}

            {{ dump(directory.getCollection.count) }}

            <div class="card-item pure-u-1-3">

                <h2><a href="{{ directory_url ~ '/' ~ type }}">{{ directory.title }}</a> <span class="badge">{{ directory.getCollection.count }}</span></h2>
                <p>
                    {{ directory.description }}
                </p>
            </div>

        {% endfor %}

    </div>

{% endblock %}