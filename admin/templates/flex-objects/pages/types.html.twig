{% extends 'partials/base.html.twig' %}
{% use 'flex-objects/pages/titlebar/types.html.twig' %}

{% block head %}
    {% if flex.count == 1 %}
        {{ redirect_me(flex.adminRoute(flex.directory.collection)) }}
    {% endif %}
    {{ parent() }}
{% endblock %}

{% block content %}

    <h1>{{ 'PLUGIN_FLEX_OBJECTS.TYPES_TITLE'|tu }}</h1>

    <div id="types" class="card-row grid fixed-blocks pure-g">
        {% for directory in flex.directories if directory.config('admin.hidden') != true %}
            {% set collection = directory.collection %}
            {% if flex.adminRoute(collection) %}
            <div class="card-item pure-u-1-3">

                <h2><a href="{{ base_url ~ flex.adminRoute(collection) }}">{{ directory.title|tu }}</a> <span class="badge">{{ collection.isAuthorized('list').count }}</span></h2>
                <p>
                    {{ directory.description }}
                </p>
            </div>
            {% endif %}
        {% endfor %}

    </div>

{% endblock %}